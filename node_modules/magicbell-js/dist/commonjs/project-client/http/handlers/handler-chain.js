"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RequestHandlerChain = void 0;
class RequestHandlerChain {
    constructor() {
        Object.defineProperty(this, "handlers", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: []
        });
    }
    addHandler(handler) {
        if (this.handlers.length > 0) {
            const previousHandler = this.handlers[this.handlers.length - 1];
            previousHandler.next = handler;
        }
        this.handlers.push(handler);
    }
    async callChain(request) {
        if (!this.handlers.length) {
            throw new Error('No handlers added to the chain');
        }
        return this.handlers[0].handle(request);
    }
    async *streamChain(request) {
        if (!this.handlers.length) {
            throw new Error('No handlers added to the chain');
        }
        yield* this.handlers[0].stream(request);
    }
}
exports.RequestHandlerChain = RequestHandlerChain;
//# sourceMappingURL=handler-chain.js.map